<?xml version="1.0" encoding="UTF-8"?>
<FlowConfiguration>
  <!-- ID MUST be the same as file name -->
  <id>publishFlow</id>
  <name>UNREDD_publish_flow</name>
  <description>UNREDD - Publish layers, stats and charts on the dissemination system.</description>
  <autorun>true</autorun>
  <EventGeneratorConfiguration>
    <id>publishingEGC</id>
    <serviceID>fsEventGeneratorService</serviceID>
    <watchDirectory>/var/stg_geobatch/input/publish</watchDirectory>
    <wildCard>*.xml</wildCard>
    <osType>OS_UNDEFINED</osType>
    <eventType>FILE_ADDED</eventType>
  </EventGeneratorConfiguration>
  <EventConsumerConfiguration>
    <id>publishingECC</id>
    <listenerId>PublishingConsumerLogger0</listenerId>
    <listenerId>PublishingCumulator0</listenerId>
    <listenerId>PublishingStatusActionLogger0</listenerId>
    <performBackup>false</performBackup>
    <!-- First and only Action configuration  -->
    <PublishingConfiguration>
      <serviceID>PublishingGeneratorService</serviceID>
      <id>PublishingActionConfiguration</id>
      <name>Publishing_Action</name>
      <description>Single-step action for publish layers, stats, charts</description>
      <listenerId>PublishingConsumerLogger0</listenerId>
      <listenerId>PublishingCumulator0</listenerId>
      <listenerId>PublishStatusActionLogger0</listenerId>
      <failIgnored>false</failIgnored>
      <srcGeoStoreConfig>
        <url>http://localhost/stg_geostore/rest</url>
        <username>admin</username>
        <password>admin</password>
      </srcGeoStoreConfig>
      <srcPostGisConfig>
        <host>localhost</host>
        <port>5432</port>
        <database>stg_geoserver</database>
        <schema>stg_geoserver</schema>
        <username>stg_geoserver</username>
        <password>stg_geoserver</password>
      </srcPostGisConfig>
      <srcGeoServerConfig>
        <id>srcGSC</id>
        <name>srcGSC</name>
        <description>srcGSC</description>
        <workspace>unredd</workspace>
        <failIgnored>false</failIgnored>
        <geoserverURL>http://localhost/stg_geoserver</geoserverURL>
        <geoserverUID>admin</geoserverUID>
        <geoserverPWD>admin</geoserverPWD>
      </srcGeoServerConfig>
      <dstGeoStoreConfig>
        <url>http://localhost/diss_geostore/rest</url>
        <username>admin</username>
        <password>admin</password>
      </dstGeoStoreConfig>
      <dstPostGisConfig>
        <host>localhost</host>
        <port>5432</port>
        <database>diss_geoserver</database>
        <schema>diss_geoserver</schema>
        <username>diss_geoserver</username>
        <password>diss_geoserver</password>
      </dstPostGisConfig>
      <dstGeoServerConfig>
        <id>dstGSC</id>
        <name>dstGSC</name>
        <description>dstGSC</description>
        <workspace>unredd</workspace>
        <failIgnored>false</failIgnored>
        <geoserverURL>http://localhost/diss_geoserver</geoserverURL>
        <geoserverUID>admin</geoserverUID>
        <geoserverPWD>admin</geoserverPWD>
      </dstGeoServerConfig>
    </PublishingConfiguration>
  </EventConsumerConfiguration>
  <ListenerConfigurations>
    <StatusProgressListener>
      <serviceID>statusListenerService</serviceID>
      <id>PublishingStatusActionLogger0</id>
    </StatusProgressListener>
    <LoggingProgressListener>
      <serviceID>loggingListenerService</serviceID>
      <id>PublishingActionLogger0</id>
      <loggerName>PublishingActionLogger0</loggerName>
    </LoggingProgressListener>
    <LoggingProgressListener>
      <serviceID>loggingListenerService</serviceID>
      <id>PublishingConsumerLogger0</id>
      <loggerName>PublishingConsumerLogger0</loggerName>
    </LoggingProgressListener>
    <CumulatingProgressListener>
      <serviceID>cumulatingListenerService</serviceID>
      <id>PublishCumulator0</id>
    </CumulatingProgressListener>
  </ListenerConfigurations>
</FlowConfiguration>
